<!-- recipe image -->
<div class="banner my-0" style="background-image: linear-gradient(rgba(0,0,0,0.1),rgba(0,0,0,0.1)), url(<%= cl_image_path @recipe.photo.key %>);">
</div>
<!--  -->

<!-- recipe heading -->
<div class="container head-container">
  <h1 class="text-center recipe-head"> <%= @recipe.name %> </h1>
</div>
<!--  -->

<!-- recipe details -->
<div class="container recipe-details mt-3 " >
  <h4 class="chef-recipe-header4"> Recipe Courtesy of</h4><%=  link_to @chef_name, chef_path(@recipe.chef), class: "d-flex justify-content-center chef-recipe-name" %>
  <p class="text-center "><%= @recipe.recipe_reviews.blank? ? "" : "⭐️ " * @recipe.recipe_reviews.average(:rating).round(2) %></p>
  <div class="container card p-4 shadow-sm">
    <div class="container px-3">
      <p><i class="far fa-clock mt-3"></i> <strong>Cook time:</strong> <%= @recipe.cook_time %> mins</p>
      <p class=""><%= @recipe.description %></p>
    </div>
  <!-- price -->
    <p id="cost-recipe" class="text-center mb-0"><%= humanized_money_with_symbol(@recipe.price) %> / hour</p>
  <!--  -->
  <!-- Booking Link -->
    <% if current_user != @recipe.chef.user %>
      <div class="container text-center mt-2 mb-4">
        <label>Ready to start cooking with chef <%= @chef_name %>?</label>
      <%= link_to "Book Session", new_recipe_booking_path(@recipe), class: "btn button button-book col-8", id:"chef-btn" %>
      </div>
    <% end %>
  </div>
  <!--  -->
<br>
  <!-- ingredients/ SHOPPING LIST -->
  <div class="container card pt-3 shadow-sm shopping-list-container" >
    <h4 id="shopping-list"  class="text-center recipe-link mb-0">Shopping List</h4>
    <hr>
    <p class="text-center mt-0 chef-recipe-name"> <%= @recipe.name %> </p>
    <div class="container px-0 pb-3">
      <% @recipe.measurements.each do |measurement| %>
        <div class="shopping-list-ingredients">
          <div class="row">
            <div class="col-2">
              <span  id="measurement-<%= measurement.id %>" class="shopping-list-checkbox"><i class="far fa-square"></i></span>
            </div>
            <div class="col-10 shopping-list-description">
              <span><%= measurement.description %> <%= measurement.ingredient.capitalize %>
              <% if current_user ==  measurement.recipe.chef.user %> |
              <%= link_to "remove", measurement_path(measurement), method: :delete, remote: true %></span>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <!--     -->

  <!-- ADD INGREDIENTS -->
  <% if current_user == @recipe.chef.user %>
    <div class="container mt-5 py-3 border shadow-sm text-center" id="add-measurement">
      <p class="text-center py-2"><i class="fas fa-plus"></i> Add Ingredient
      <%= simple_form_for([@recipe, @measurement], remote: true) do |f| %>
        <p class="mb-0"><i class="fas fa-weight mr-2"></i>Ingredient Quantity</p>
        <%= f.input_field :description, placeholder: "    1 oz" %>
        <p class="mb-0 mt-2"><i class="fas fa-carrot mr-2"></i>Add an ingredient</p>
        <%= f.input_field :ingredient, placeholder: "    Chicken"%>
        <%= f.button :submit, "Add Ingredient", class: "btn del-chef col-6 mt-3 shadow-sm" %>
      <% end %>
    </div>

    <div class="container text-center">
      <!-- chef dashboard link -->
      <%= link_to "Go to Chef Dashboard", chef_dashboard_path(@chef), class: "btn btn-light col-10 shadow mt-5 mb-3" %>
      </div>
  <% end %>
</div>
  <!--  -->

<% if  !@recipe.recipe_reviews.empty? %>
  <!-- RECIPE reviews -->
    <% @recipe.recipe_reviews.each do |review| %>
      <div class="notification mb-0 bg-white">
        <div class="mx-1">
          <%= cl_image_tag review.booking.user.photo.key, class: "avatar-large" %>
        </div>
        <div class="notification-content">
          <p class="my-0"><strong><%= review.booking.user.first_name %> <%= review.booking.user.last_name %></strong></p>
          <p><span><%= review.created_at.strftime("%B %e, %Y") %> |</span>  <%= "⭐️" * review.rating %></p>
          <p><%= review.content %></p>
        </div>
      </div>
    <% end %>
<% end %>

<!-- bottom links -->
<div class="container text-center my-2 justify-content-between">
  <div class="d-flex justify-content-between row">
    <div class="mr-auto px-2">
      <%= link_to "All Recipes", recipes_path, class: "btn button shadow", id:"chef-btn" %>
    </div>
    <div class="px-2">
      <%= link_to "⬆", recipe_path(@recipe), class: "btn btn-light shadow" %>
    </div>
  </div>
</div>


